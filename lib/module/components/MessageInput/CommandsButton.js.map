{"version":3,"sources":["CommandsButton.tsx"],"names":["CommandsButtonWithContext","props","disabled","handleOnPress","suggestions","theme","colors","accent_blue","grey","commandsButton","messageInput","bottom","left","right","top","data","some","suggestion","areEqual","prevProps","nextProps","prevDisabled","prevSuggestions","nextDisabled","nextSuggestions","disabledEqual","suggestionsEqual","MemoizedCommandsButton","React","memo","CommandsButton","displayName"],"mappings":";;;;;;;;;AAAA;;AACA;;AAEA;;AAIA;;AAKA;;AACA;;;;;AA6BA,IAAMA,yBAAyB,GAAG,SAA5BA,yBAA4B,CAShCC,KATgC,EAU7B;AACH,MAAQC,QAAR,GAAiDD,KAAjD,CAAQC,QAAR;AAAA,MAAkBC,aAAlB,GAAiDF,KAAjD,CAAkBE,aAAlB;AAAA,MAAiCC,WAAjC,GAAiDH,KAAjD,CAAiCG,WAAjC;;AAEA,kBAKI,6BALJ;AAAA,kCACEC,KADF;AAAA,8CAEIC,MAFJ;AAAA,MAEcC,WAFd,yBAEcA,WAFd;AAAA,MAE2BC,IAF3B,yBAE2BA,IAF3B;AAAA,MAGoBC,cAHpB,mBAGIC,YAHJ,CAGoBD,cAHpB;;AAOA,SACE,gCAAC,2CAAD;AACE,IAAA,QAAQ,EAAEP,QADZ;AAEE,IAAA,OAAO,EAAE;AAAES,MAAAA,MAAM,EAAE,EAAV;AAAcC,MAAAA,IAAI,EAAE,CAApB;AAAuBC,MAAAA,KAAK,EAAE,EAA9B;AAAkCC,MAAAA,GAAG,EAAE;AAAvC,KAFX;AAGE,IAAA,OAAO,EAAEX,aAHX;AAIE,IAAA,KAAK,EAAE,CAACM,cAAD,CAJT;AAKE,IAAA,MAAM,EAAC,iBALT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAOE,gCAAC,oBAAD;AACE,IAAA,QAAQ,EACNL,WAAW,IAAIA,WAAW,CAACW,IAAZ,CAAiBC,IAAjB,CAAsB,UAACC,UAAD;AAAA,aAAgB,6CAAoBA,UAApB,CAAhB;AAAA,KAAtB,CAAf,GACIV,WADJ,GAEIC,IAJR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPF,CADF;AAiBD,CArCD;;AAuCA,IAAMU,QAAQ,GAAG,SAAXA,QAAW,CASfC,SATe,EAUfC,SAVe,EAWZ;AACH,MAAkBC,YAAlB,GAAiEF,SAAjE,CAAQjB,QAAR;AAAA,MAA6CoB,eAA7C,GAAiEH,SAAjE,CAAgCf,WAAhC;AACA,MAAkBmB,YAAlB,GAAiEH,SAAjE,CAAQlB,QAAR;AAAA,MAA6CsB,eAA7C,GAAiEJ,SAAjE,CAAgChB,WAAhC;AAEA,MAAMqB,aAAa,GAAGJ,YAAY,KAAKE,YAAvC;AACA,MAAI,CAACE,aAAL,EAAoB,OAAO,KAAP;AAEpB,MAAMC,gBAAgB,GAAG,CAAC,CAACJ,eAAF,KAAsB,CAAC,CAACE,eAAjD;AACA,MAAI,CAACE,gBAAL,EAAuB,OAAO,KAAP;AAEvB,SAAO,IAAP;AACD,CAtBD;;AAwBA,IAAMC,sBAAsB,GAAGC,kBAAMC,IAAN,CAC7B7B,yBAD6B,EAE7BkB,QAF6B,CAA/B;;AAkBO,IAAMY,cAAc,GAAG,SAAjBA,cAAiB,CAS5B7B,KAT4B,EAUzB;AACH,2BAA6B,wCAA7B;AAAA,iDAAQC,QAAR;AAAA,MAAQA,QAAR,sCAAmB,KAAnB;;AACA,8BAAwB,gDAAxB;AAAA,MAAQE,WAAR,yBAAQA,WAAR;;AAEA,SAAO,gCAAC,sBAAD;AAA8BF,IAAAA,QAAQ,EAARA,QAA9B;AAAwCE,IAAAA,WAAW,EAAXA;AAAxC,KAA2DH,KAA3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAP;AACD,CAfM;;;AAiBP6B,cAAc,CAACC,WAAf,GAA6B,8BAA7B","sourcesContent":["import React from 'react';\nimport { TouchableOpacity } from 'react-native-gesture-handler';\n\nimport {\n  ChannelContextValue,\n  useChannelContext,\n} from '../../contexts/channelContext/ChannelContext';\nimport {\n  isSuggestionCommand,\n  SuggestionsContextValue,\n  useSuggestionsContext,\n} from '../../contexts/suggestionsContext/SuggestionsContext';\nimport { useTheme } from '../../contexts/themeContext/ThemeContext';\nimport { Lightning } from '../../icons/Lightning';\n\nimport type { GestureResponderEvent } from 'react-native';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n  UnknownType,\n} from '../../types/types';\n\ntype CommandsButtonPropsWithContext<\n  At extends UnknownType = DefaultAttachmentType,\n  Ch extends UnknownType = DefaultChannelType,\n  Co extends string = DefaultCommandType,\n  Ev extends UnknownType = DefaultEventType,\n  Me extends UnknownType = DefaultMessageType,\n  Re extends UnknownType = DefaultReactionType,\n  Us extends UnknownType = DefaultUserType,\n> = Pick<ChannelContextValue<At, Ch, Co, Ev, Me, Re, Us>, 'disabled'> &\n  Pick<SuggestionsContextValue<Co, Us>, 'suggestions'> & {\n    /** Function that opens commands selector */\n    handleOnPress?: ((event: GestureResponderEvent) => void) & (() => void);\n  };\n\nconst CommandsButtonWithContext = <\n  At extends UnknownType = DefaultAttachmentType,\n  Ch extends UnknownType = DefaultChannelType,\n  Co extends string = DefaultCommandType,\n  Ev extends UnknownType = DefaultEventType,\n  Me extends UnknownType = DefaultMessageType,\n  Re extends UnknownType = DefaultReactionType,\n  Us extends UnknownType = DefaultUserType,\n>(\n  props: CommandsButtonPropsWithContext<At, Ch, Co, Ev, Me, Re, Us>,\n) => {\n  const { disabled, handleOnPress, suggestions } = props;\n\n  const {\n    theme: {\n      colors: { accent_blue, grey },\n      messageInput: { commandsButton },\n    },\n  } = useTheme();\n\n  return (\n    <TouchableOpacity\n      disabled={disabled}\n      hitSlop={{ bottom: 15, left: 5, right: 15, top: 15 }}\n      onPress={handleOnPress}\n      style={[commandsButton]}\n      testID='commands-button'\n    >\n      <Lightning\n        pathFill={\n          suggestions && suggestions.data.some((suggestion) => isSuggestionCommand(suggestion))\n            ? accent_blue\n            : grey\n        }\n      />\n    </TouchableOpacity>\n  );\n};\n\nconst areEqual = <\n  At extends UnknownType = DefaultAttachmentType,\n  Ch extends UnknownType = DefaultChannelType,\n  Co extends string = DefaultCommandType,\n  Ev extends UnknownType = DefaultEventType,\n  Me extends UnknownType = DefaultMessageType,\n  Re extends UnknownType = DefaultReactionType,\n  Us extends UnknownType = DefaultUserType,\n>(\n  prevProps: CommandsButtonPropsWithContext<At, Ch, Co, Ev, Me, Re, Us>,\n  nextProps: CommandsButtonPropsWithContext<At, Ch, Co, Ev, Me, Re, Us>,\n) => {\n  const { disabled: prevDisabled, suggestions: prevSuggestions } = prevProps;\n  const { disabled: nextDisabled, suggestions: nextSuggestions } = nextProps;\n\n  const disabledEqual = prevDisabled === nextDisabled;\n  if (!disabledEqual) return false;\n\n  const suggestionsEqual = !!prevSuggestions === !!nextSuggestions;\n  if (!suggestionsEqual) return false;\n\n  return true;\n};\n\nconst MemoizedCommandsButton = React.memo(\n  CommandsButtonWithContext,\n  areEqual,\n) as typeof CommandsButtonWithContext;\n\nexport type CommandsButtonProps<\n  At extends UnknownType = DefaultAttachmentType,\n  Ch extends UnknownType = DefaultChannelType,\n  Co extends string = DefaultCommandType,\n  Ev extends UnknownType = DefaultEventType,\n  Me extends UnknownType = DefaultMessageType,\n  Re extends UnknownType = DefaultReactionType,\n  Us extends UnknownType = DefaultUserType,\n> = Partial<CommandsButtonPropsWithContext<At, Ch, Co, Ev, Me, Re, Us>>;\n\n/**\n * UI Component for attach button in MessageInput component.\n */\nexport const CommandsButton = <\n  At extends UnknownType = DefaultAttachmentType,\n  Ch extends UnknownType = DefaultChannelType,\n  Co extends string = DefaultCommandType,\n  Ev extends UnknownType = DefaultEventType,\n  Me extends UnknownType = DefaultMessageType,\n  Re extends UnknownType = DefaultReactionType,\n  Us extends UnknownType = DefaultUserType,\n>(\n  props: CommandsButtonProps<At, Ch, Co, Ev, Me, Re, Us>,\n) => {\n  const { disabled = false } = useChannelContext<At, Ch, Co, Ev, Me, Re, Us>();\n  const { suggestions } = useSuggestionsContext<Co, Us>();\n\n  return <MemoizedCommandsButton {...{ disabled, suggestions }} {...props} />;\n};\n\nCommandsButton.displayName = 'CommandsButton{messageInput}';\n"]}