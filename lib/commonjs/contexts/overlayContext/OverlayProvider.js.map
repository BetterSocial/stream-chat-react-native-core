{"version":3,"sources":["OverlayProvider.tsx"],"names":["OverlayProvider","props","AttachmentPickerBottomSheetHandle","DefaultAttachmentPickerBottomSheetHandle","attachmentPickerBottomSheetHandleHeight","attachmentPickerBottomSheetHeight","AttachmentPickerError","DefaultAttachmentPickerError","attachmentPickerErrorButtonText","AttachmentPickerErrorImage","DefaultAttachmentPickerErrorImage","attachmentPickerErrorText","attachmentSelectionBarHeight","bottomInset","CameraSelectorIcon","DefaultCameraSelectorIcon","children","closePicker","ref","current","close","FileSelectorIcon","DefaultFileSelectorIcon","i18nInstance","imageGalleryCustomComponents","imageGalleryGridHandleHeight","imageGalleryGridSnapPoints","ImageOverlaySelectedComponent","DefaultImageOverlaySelectedComponent","ImageSelectorIcon","DefaultImageSelectorIcon","MessageActions","numberOfAttachmentImagesToLoadPerCall","numberOfAttachmentPickerImageColumns","numberOfImageGalleryGridColumns","openPicker","snapTo","console","warn","topInset","translucentStatusBar","OverlayReactionList","OverlayReactions","value","attachmentPickerProps","bottomSheetRef","t","key","tDateTimeParser","input","translators","setTranslators","blurType","setBlurType","overlay","setOverlay","overlayOpacity","Dimensions","get","height","width","loadingTranslators","backAction","undefined","backHandler","BackHandler","addEventListener","remove","attachmentPickerContext","overlayStyle","opacity","overlayContext","style","StyleSheet","absoluteFill"],"mappings":"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","sourcesContent":["import React, { PropsWithChildren, useEffect, useRef, useState } from 'react';\nimport { BackHandler, Dimensions, StyleSheet, ViewStyle } from 'react-native';\nimport Dayjs from 'dayjs';\nimport Animated, {\n  cancelAnimation,\n  useAnimatedStyle,\n  useSharedValue,\n  withTiming,\n} from 'react-native-reanimated';\n\nimport { AttachmentPickerProvider } from '../attachmentPickerContext/AttachmentPickerContext';\nimport { ImageGalleryProvider } from '../imageGalleryContext/ImageGalleryContext';\nimport { MessageOverlayProvider } from '../messageOverlayContext/MessageOverlayContext';\nimport { ThemeProvider } from '../themeContext/ThemeContext';\nimport {\n  TranslationContextValue,\n  TranslationProvider,\n} from '../translationContext/TranslationContext';\n\nimport { AttachmentPicker } from '../../components/AttachmentPicker/AttachmentPicker';\nimport { AttachmentPickerError as DefaultAttachmentPickerError } from '../../components/AttachmentPicker/components/AttachmentPickerError';\nimport { AttachmentPickerBottomSheetHandle as DefaultAttachmentPickerBottomSheetHandle } from '../../components/AttachmentPicker/components/AttachmentPickerBottomSheetHandle';\nimport { AttachmentPickerErrorImage as DefaultAttachmentPickerErrorImage } from '../../components/AttachmentPicker/components/AttachmentPickerErrorImage';\nimport { CameraSelectorIcon as DefaultCameraSelectorIcon } from '../../components/AttachmentPicker/components/CameraSelectorIcon';\nimport { FileSelectorIcon as DefaultFileSelectorIcon } from '../../components/AttachmentPicker/components/FileSelectorIcon';\nimport { ImageOverlaySelectedComponent as DefaultImageOverlaySelectedComponent } from '../../components/AttachmentPicker/components/ImageOverlaySelectedComponent';\nimport { ImageSelectorIcon as DefaultImageSelectorIcon } from '../../components/AttachmentPicker/components/ImageSelectorIcon';\nimport { ImageGallery } from '../../components/ImageGallery/ImageGallery';\nimport { MessageOverlay } from '../../components/MessageOverlay/MessageOverlay';\nimport { useStreami18n } from '../../hooks/useStreami18n';\nimport { BlurView } from '../../native';\n\nimport type BottomSheet from '@gorhom/bottom-sheet';\n\nimport { BlurType, OverlayContext, OverlayProviderProps } from './OverlayContext';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n  UnknownType,\n} from '../../types/types';\n\n/**\n * - The highest level of these components is the `OverlayProvider`. The `OverlayProvider` allows users to interact with messages on long press above the underlying views, use the full screen image viewer, and use the `AttachmentPicker` as a keyboard-esk view.\n *  Because these views must exist above all others `OverlayProvider` should wrap your navigation stack as well. Assuming [`React Navigation`](https://reactnavigation.org/) is being used, your highest level navigation stack should be wrapped in the provider:\n *\n *    ```js\n *    <NavigationContainer>\n *      <OverlayProvider>\n *        <Stack.Navigator>\n *          <Stack.Screen />\n *        </Stack.Navigator>\n *      </OverlayProvider>\n *    </NavigationContainer>\n *    ```\n *\n * - Don't forget to check our cookbook section of [OverlayProvider](https://github.com/GetStream/stream-chat-react-native/wiki/Cookbook-v3.0#overlayprovider)\n *\n * - Also check the [visual component guide](https://github.com/GetStream/stream-chat-react-native/wiki/Cookbook-v3.0#custom-components), to learn about component customizations.\n *\n * @example ./OverlayProvider.md\n */\nexport const OverlayProvider = <\n  At extends UnknownType = DefaultAttachmentType,\n  Ch extends UnknownType = DefaultChannelType,\n  Co extends string = DefaultCommandType,\n  Ev extends UnknownType = DefaultEventType,\n  Me extends UnknownType = DefaultMessageType,\n  Re extends UnknownType = DefaultReactionType,\n  Us extends UnknownType = DefaultUserType,\n>(\n  props: PropsWithChildren<OverlayProviderProps<At, Ch, Co, Ev, Me, Re, Us>>,\n) => {\n  const {\n    AttachmentPickerBottomSheetHandle = DefaultAttachmentPickerBottomSheetHandle,\n    attachmentPickerBottomSheetHandleHeight,\n    attachmentPickerBottomSheetHeight,\n    AttachmentPickerError = DefaultAttachmentPickerError,\n    attachmentPickerErrorButtonText,\n    AttachmentPickerErrorImage = DefaultAttachmentPickerErrorImage,\n    attachmentPickerErrorText,\n    attachmentSelectionBarHeight,\n    bottomInset,\n    CameraSelectorIcon = DefaultCameraSelectorIcon,\n    children,\n    closePicker = (ref) => {\n      if (ref.current) {\n        ref.current.close();\n      }\n    },\n    FileSelectorIcon = DefaultFileSelectorIcon,\n    i18nInstance,\n    imageGalleryCustomComponents,\n    imageGalleryGridHandleHeight,\n    imageGalleryGridSnapPoints,\n    ImageOverlaySelectedComponent = DefaultImageOverlaySelectedComponent,\n    ImageSelectorIcon = DefaultImageSelectorIcon,\n    MessageActions,\n    numberOfAttachmentImagesToLoadPerCall,\n    numberOfAttachmentPickerImageColumns,\n    numberOfImageGalleryGridColumns,\n    openPicker = (ref) => {\n      if (ref.current) {\n        ref.current.snapTo(0);\n      } else {\n        console.warn('bottom and top insets must be set for the image picker to work correctly');\n      }\n    },\n    topInset,\n    translucentStatusBar,\n    OverlayReactionList,\n    OverlayReactions,\n    value,\n  } = props;\n\n  const attachmentPickerProps = {\n    AttachmentPickerBottomSheetHandle,\n    attachmentPickerBottomSheetHandleHeight,\n    attachmentPickerBottomSheetHeight,\n    AttachmentPickerError,\n    attachmentPickerErrorButtonText,\n    AttachmentPickerErrorImage,\n    attachmentPickerErrorText,\n    attachmentSelectionBarHeight,\n    ImageOverlaySelectedComponent,\n    numberOfAttachmentImagesToLoadPerCall,\n    numberOfAttachmentPickerImageColumns,\n    translucentStatusBar,\n  };\n\n  const bottomSheetRef = useRef<BottomSheet>(null);\n\n  const [translators, setTranslators] = useState<TranslationContextValue>({\n    t: (key: string) => key,\n    tDateTimeParser: (input?: string | number | Date) => Dayjs(input),\n  });\n  const [blurType, setBlurType] = useState<BlurType>();\n  const [overlay, setOverlay] = useState(value?.overlay || 'none');\n\n  const overlayOpacity = useSharedValue(0);\n  const { height, width } = Dimensions.get('screen');\n\n  // Setup translators\n  const loadingTranslators = useStreami18n({ i18nInstance, setTranslators });\n\n  useEffect(() => {\n    const backAction = () => {\n      if (overlay !== 'none') {\n        setBlurType(undefined);\n        setOverlay('none');\n        return true;\n      }\n\n      return false;\n    };\n\n    const backHandler = BackHandler.addEventListener('hardwareBackPress', backAction);\n\n    return () => backHandler.remove();\n  }, [overlay]);\n\n  useEffect(() => {\n    if (bottomSheetRef.current) {\n      bottomSheetRef.current.close();\n    }\n    cancelAnimation(overlayOpacity);\n    if (overlay !== 'none') {\n      overlayOpacity.value = withTiming(1);\n    } else {\n      overlayOpacity.value = withTiming(0);\n    }\n  }, [overlay]);\n\n  // Setup translators\n  useStreami18n({ i18nInstance, setTranslators });\n\n  const attachmentPickerContext = {\n    attachmentPickerBottomSheetHeight,\n    attachmentSelectionBarHeight,\n    bottomInset,\n    CameraSelectorIcon,\n    closePicker: () => closePicker(bottomSheetRef),\n    FileSelectorIcon,\n    ImageSelectorIcon,\n    openPicker: () => openPicker(bottomSheetRef),\n    topInset,\n  };\n\n  const overlayStyle = useAnimatedStyle<ViewStyle>(\n    () => ({\n      opacity: overlayOpacity.value,\n    }),\n    [],\n  );\n\n  const overlayContext = {\n    overlay,\n    setBlurType,\n    setOverlay,\n    style: value?.style,\n    translucentStatusBar,\n  };\n\n  if (loadingTranslators) return null;\n\n  return (\n    <TranslationProvider value={translators}>\n      <OverlayContext.Provider value={overlayContext}>\n        <MessageOverlayProvider<At, Ch, Co, Ev, Me, Re, Us>>\n          <AttachmentPickerProvider value={attachmentPickerContext}>\n            <ImageGalleryProvider>\n              {children}\n              <ThemeProvider style={overlayContext.style}>\n                <Animated.View\n                  pointerEvents={overlay === 'none' ? 'none' : 'auto'}\n                  style={[StyleSheet.absoluteFill, overlayStyle]}\n                >\n                  <BlurView\n                    blurType={blurType}\n                    style={[StyleSheet.absoluteFill, { height, width }]}\n                  />\n                </Animated.View>\n                <MessageOverlay<At, Ch, Co, Ev, Me, Re, Us>\n                  MessageActions={MessageActions}\n                  overlayOpacity={overlayOpacity}\n                  OverlayReactionList={OverlayReactionList}\n                  OverlayReactions={OverlayReactions}\n                  visible={overlay === 'message'}\n                />\n                <ImageGallery<At, Ch, Co, Ev, Me, Re, Us>\n                  imageGalleryCustomComponents={imageGalleryCustomComponents}\n                  imageGalleryGridHandleHeight={imageGalleryGridHandleHeight}\n                  imageGalleryGridSnapPoints={imageGalleryGridSnapPoints}\n                  numberOfImageGalleryGridColumns={numberOfImageGalleryGridColumns}\n                  overlayOpacity={overlayOpacity}\n                  visible={overlay === 'gallery'}\n                />\n                <AttachmentPicker ref={bottomSheetRef} {...attachmentPickerProps} />\n              </ThemeProvider>\n            </ImageGalleryProvider>\n          </AttachmentPickerProvider>\n        </MessageOverlayProvider>\n      </OverlayContext.Provider>\n    </TranslationProvider>\n  );\n};\n"]}