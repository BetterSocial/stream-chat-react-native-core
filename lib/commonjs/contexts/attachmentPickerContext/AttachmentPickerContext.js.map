{"version":3,"sources":["AttachmentPickerContext.tsx"],"names":["AttachmentPickerContext","React","createContext","AttachmentPickerProvider","children","value","bottomInsetValue","bottomInset","topInsetValue","topInset","setBottomInset","maxNumberOfFiles","setMaxNumberOfFiles","selectedImages","setSelectedImages","selectedPicker","setSelectedPicker","setTopInset","combinedValue","useAttachmentPickerContext","withAttachmentPickerContext","Component","WithAttachmentPickerContextComponent","props","attachmentPickerContext","displayName"],"mappings":";;;;;;;;;;;;;AAAA;;AAEA;;;;;;;;;AAuDO,IAAMA,uBAAuB,GAAGC,kBAAMC,aAAN,CACrC,EADqC,CAAhC;;;;AAIA,IAAMC,wBAAwB,GAAG,SAA3BA,wBAA2B,OAejC;AAAA;;AAAA,MAdLC,QAcK,QAdLA,QAcK;AAAA,MAbLC,KAaK,QAbLA,KAaK;AACL,MAAMC,gBAAgB,GAAGD,KAAH,oBAAGA,KAAK,CAAEE,WAAhC;AACA,MAAMC,aAAa,GAAGH,KAAH,oBAAGA,KAAK,CAAEI,QAA7B;;AAEA,kBAAsC,qBAAiBH,gBAAjB,WAAiBA,gBAAjB,GAAqC,CAArC,CAAtC;AAAA;AAAA,MAAOC,WAAP;AAAA,MAAoBG,cAApB;;AACA,mBAAgD,qBAAS,EAAT,CAAhD;AAAA;AAAA,MAAOC,gBAAP;AAAA,MAAyBC,mBAAzB;;AACA,mBAA4C,qBAAkB,EAAlB,CAA5C;AAAA;AAAA,MAAOC,cAAP;AAAA,MAAuBC,iBAAvB;;AACA,mBAA4C,sBAA5C;AAAA;AAAA,MAAOC,cAAP;AAAA,MAAuBC,iBAAvB;;AACA,mBAAgC,wCAAiBX,KAAjB,oBAAiBA,KAAK,CAAEI,QAAxB,8BAAoC,CAApC,CAAhC;AAAA;AAAA,MAAOA,QAAP;AAAA,MAAiBQ,WAAjB;;AAEA,wBAAU,YAAM;AACdP,IAAAA,cAAc,CAACJ,gBAAD,WAACA,gBAAD,GAAqB,CAArB,CAAd;AACD,GAFD,EAEG,CAACA,gBAAD,CAFH;AAIA,wBAAU,YAAM;AACdW,IAAAA,WAAW,CAACT,aAAD,WAACA,aAAD,GAAkB,CAAlB,CAAX;AACD,GAFD,EAEG,CAACA,aAAD,CAFH;AAIA,MAAMU,aAAa;AACjBP,IAAAA,gBAAgB,EAAhBA,gBADiB;AAEjBE,IAAAA,cAAc,EAAdA,cAFiB;AAGjBE,IAAAA,cAAc,EAAdA,cAHiB;AAIjBL,IAAAA,cAAc,EAAdA,cAJiB;AAKjBE,IAAAA,mBAAmB,EAAnBA,mBALiB;AAMjBE,IAAAA,iBAAiB,EAAjBA,iBANiB;AAOjBE,IAAAA,iBAAiB,EAAjBA,iBAPiB;AAQjBC,IAAAA,WAAW,EAAXA;AARiB,KASdZ,KATc;AAUjBE,IAAAA,WAAW,EAAXA,WAViB;AAWjBE,IAAAA,QAAQ,EAARA;AAXiB,IAAnB;AAcA,SACE,gCAAC,uBAAD,CAAyB,QAAzB;AACE,IAAA,KAAK,EAAES,aADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAGGd,QAHH,CADF;AAOD,CAtDM;;;;AAwDA,IAAMe,0BAA0B,GAAG,SAA7BA,0BAA6B;AAAA,SACxC,uBAAWnB,uBAAX,CADwC;AAAA,CAAnC;;;;AAGA,IAAMoB,2BAA2B,GAAG,SAA9BA,2BAA8B,CACzCC,SADyC,EAEiB;AAC1D,MAAMC,oCAAoC,GAAG,SAAvCA,oCAAuC,CAC3CC,KAD2C,EAExC;AACH,QAAMC,uBAAuB,GAAGL,0BAA0B,EAA1D;AAEA,WAAO,gCAAC,SAAD,gCAAgBI,KAAhB,EAAiCC,uBAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAP;AACD,GAND;;AAOAF,EAAAA,oCAAoC,CAACG,WAArC,mCAAiF,oCAC/EJ,SAD+E,CAAjF;AAGA,SAAOC,oCAAP;AACD,CAdM","sourcesContent":["import React, { PropsWithChildren, useContext, useEffect, useState } from 'react';\n\nimport { getDisplayName } from '../utils/getDisplayName';\n\nimport type { Asset } from '../../native';\nimport type { UnknownType } from '../../types/types';\n\nexport type AttachmentPickerIconProps = {\n  numberOfImageUploads: number;\n  selectedPicker?: 'images';\n};\n\nexport type AttachmentPickerContextValue = {\n  /**\n   * `bottomInset` determine the height of the `AttachmentPicker` and the underlying shift to the `MessageList` when it is opened.\n   * This can also be set via the `setBottomInset` function provided by the `useAttachmentPickerContext` hook.\n   *\n   * Please check [OverlayProvider](https://github.com/GetStream/stream-chat-react-native/wiki/Cookbook-v3.0#overlayprovider) section in Cookbook\n   * for more details.\n   */\n  bottomInset: number;\n  /**\n   * Custom UI component for [camera selector icon](https://github.com/GetStream/stream-chat-react-native/blob/master/screenshots/docs/1.png)\n   *\n   * **Default: ** [CameraSelectorIcon](https://github.com/GetStream/stream-chat-react-native/blob/master/src/components/AttachmentPicker/components/CameraSelectorIcon.tsx)\n   */\n  CameraSelectorIcon: React.ComponentType<AttachmentPickerIconProps>;\n  closePicker: () => void;\n  /**\n   * Custom UI component for [file selector icon](https://github.com/GetStream/stream-chat-react-native/blob/master/screenshots/docs/1.png)\n   *\n   * **Default: ** [FileSelectorIcon](https://github.com/GetStream/stream-chat-react-native/blob/master/src/components/AttachmentPicker/components/FileSelectorIcon.tsx)\n   */\n  FileSelectorIcon: React.ComponentType<AttachmentPickerIconProps>;\n  /**\n   * Custom UI component for [image selector icon](https://github.com/GetStream/stream-chat-react-native/blob/master/screenshots/docs/1.png)\n   *\n   * **Default: ** [ImageSelectorIcon](https://github.com/GetStream/stream-chat-react-native/blob/master/src/components/AttachmentPicker/components/ImageSelectorIcon.tsx)\n   */\n  ImageSelectorIcon: React.ComponentType<AttachmentPickerIconProps>;\n  /**\n   * Limit for maximum files that can be attached per message.\n   */\n  maxNumberOfFiles: number;\n  openPicker: () => void;\n  selectedImages: Asset[];\n  setBottomInset: React.Dispatch<React.SetStateAction<number>>;\n  setMaxNumberOfFiles: React.Dispatch<React.SetStateAction<number>>;\n  setSelectedImages: React.Dispatch<React.SetStateAction<Asset[]>>;\n  setSelectedPicker: React.Dispatch<React.SetStateAction<'images' | undefined>>;\n  setTopInset: React.Dispatch<React.SetStateAction<number>>;\n  topInset: number;\n  attachmentPickerBottomSheetHeight?: number;\n  attachmentSelectionBarHeight?: number;\n  selectedPicker?: 'images';\n};\n\nexport const AttachmentPickerContext = React.createContext<AttachmentPickerContextValue>(\n  {} as AttachmentPickerContextValue,\n);\n\nexport const AttachmentPickerProvider = ({\n  children,\n  value,\n}: PropsWithChildren<{\n  value?: Pick<\n    AttachmentPickerContextValue,\n    | 'attachmentSelectionBarHeight'\n    | 'attachmentPickerBottomSheetHeight'\n    | 'CameraSelectorIcon'\n    | 'closePicker'\n    | 'FileSelectorIcon'\n    | 'ImageSelectorIcon'\n    | 'openPicker'\n  > &\n    Partial<Pick<AttachmentPickerContextValue, 'bottomInset' | 'topInset'>>;\n}>) => {\n  const bottomInsetValue = value?.bottomInset;\n  const topInsetValue = value?.topInset;\n\n  const [bottomInset, setBottomInset] = useState<number>(bottomInsetValue ?? 0);\n  const [maxNumberOfFiles, setMaxNumberOfFiles] = useState(10);\n  const [selectedImages, setSelectedImages] = useState<Asset[]>([]);\n  const [selectedPicker, setSelectedPicker] = useState<'images'>();\n  const [topInset, setTopInset] = useState<number>(value?.topInset ?? 0);\n\n  useEffect(() => {\n    setBottomInset(bottomInsetValue ?? 0);\n  }, [bottomInsetValue]);\n\n  useEffect(() => {\n    setTopInset(topInsetValue ?? 0);\n  }, [topInsetValue]);\n\n  const combinedValue = {\n    maxNumberOfFiles,\n    selectedImages,\n    selectedPicker,\n    setBottomInset,\n    setMaxNumberOfFiles,\n    setSelectedImages,\n    setSelectedPicker,\n    setTopInset,\n    ...value,\n    bottomInset,\n    topInset,\n  };\n\n  return (\n    <AttachmentPickerContext.Provider\n      value={combinedValue as unknown as AttachmentPickerContextValue}\n    >\n      {children}\n    </AttachmentPickerContext.Provider>\n  );\n};\n\nexport const useAttachmentPickerContext = () =>\n  useContext(AttachmentPickerContext) as unknown as AttachmentPickerContextValue;\n\nexport const withAttachmentPickerContext = <P extends UnknownType>(\n  Component: React.ComponentType<P>,\n): React.FC<Omit<P, keyof AttachmentPickerContextValue>> => {\n  const WithAttachmentPickerContextComponent = (\n    props: Omit<P, keyof AttachmentPickerContextValue>,\n  ) => {\n    const attachmentPickerContext = useAttachmentPickerContext();\n\n    return <Component {...(props as P)} {...attachmentPickerContext} />;\n  };\n  WithAttachmentPickerContextComponent.displayName = `WithAttachmentPickerContext${getDisplayName(\n    Component,\n  )}`;\n  return WithAttachmentPickerContextComponent;\n};\n"]}