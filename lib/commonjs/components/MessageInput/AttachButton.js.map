{"version":3,"sources":["AttachButton.tsx"],"names":["AttachButtonWithContext","props","disabled","handleOnPress","selectedPicker","theme","colors","accent_blue","grey","attachButton","messageInput","bottom","left","right","top","areEqual","prevProps","nextProps","prevDisabled","prevHandleOnPress","prevSelectedPicker","nextDisabled","nextHandleOnPress","nextSelectedPicker","disabledEqual","handleOnPressEqual","selectedPickerEqual","MemoizedAttachButton","React","memo","AttachButton","displayName"],"mappings":";;;;;;;;;AAAA;;AACA;;AAEA;;AACA;;AAIA;;AACA;;;;;AA6BA,IAAMA,uBAAuB,GAAG,SAA1BA,uBAA0B,CAS9BC,KAT8B,EAU3B;AACH,MAAQC,QAAR,GAAoDD,KAApD,CAAQC,QAAR;AAAA,MAAkBC,aAAlB,GAAoDF,KAApD,CAAkBE,aAAlB;AAAA,MAAiCC,cAAjC,GAAoDH,KAApD,CAAiCG,cAAjC;;AACA,kBAKI,6BALJ;AAAA,kCACEC,KADF;AAAA,8CAEIC,MAFJ;AAAA,MAEcC,WAFd,yBAEcA,WAFd;AAAA,MAE2BC,IAF3B,yBAE2BA,IAF3B;AAAA,MAGoBC,YAHpB,mBAGIC,YAHJ,CAGoBD,YAHpB;;AAOA,SACE,gCAAC,2CAAD;AACE,IAAA,QAAQ,EAAEP,QADZ;AAEE,IAAA,OAAO,EAAE;AAAES,MAAAA,MAAM,EAAE,EAAV;AAAcC,MAAAA,IAAI,EAAE,EAApB;AAAwBC,MAAAA,KAAK,EAAE,CAA/B;AAAkCC,MAAAA,GAAG,EAAE;AAAvC,KAFX;AAGE,IAAA,OAAO,EAAEZ,QAAQ,GAAG;AAAA,aAAM,IAAN;AAAA,KAAH,GAAgBC,aAHnC;AAIE,IAAA,KAAK,EAAE,CAACM,YAAD,CAJT;AAKE,IAAA,MAAM,EAAC,eALT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAOE,gCAAC,cAAD;AAAQ,IAAA,QAAQ,EAAEL,cAAc,KAAK,QAAnB,GAA8BG,WAA9B,GAA4CC,IAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPF,CADF;AAWD,CA9BD;;AAgCA,IAAMO,QAAQ,GAAG,SAAXA,QAAW,CASfC,SATe,EAUfC,SAVe,EAWZ;AACH,MACYC,YADZ,GAIIF,SAJJ,CACEd,QADF;AAAA,MAEiBiB,iBAFjB,GAIIH,SAJJ,CAEEb,aAFF;AAAA,MAGkBiB,kBAHlB,GAIIJ,SAJJ,CAGEZ,cAHF;AAKA,MACYiB,YADZ,GAIIJ,SAJJ,CACEf,QADF;AAAA,MAEiBoB,iBAFjB,GAIIL,SAJJ,CAEEd,aAFF;AAAA,MAGkBoB,kBAHlB,GAIIN,SAJJ,CAGEb,cAHF;AAMA,MAAMoB,aAAa,GAAGN,YAAY,KAAKG,YAAvC;AACA,MAAI,CAACG,aAAL,EAAoB,OAAO,KAAP;AAEpB,MAAMC,kBAAkB,GAAGN,iBAAiB,KAAKG,iBAAjD;AACA,MAAI,CAACG,kBAAL,EAAyB,OAAO,KAAP;AAEzB,MAAMC,mBAAmB,GAAGN,kBAAkB,KAAKG,kBAAnD;AACA,MAAI,CAACG,mBAAL,EAA0B,OAAO,KAAP;AAE1B,SAAO,IAAP;AACD,CAjCD;;AAmCA,IAAMC,oBAAoB,GAAGC,kBAAMC,IAAN,CAC3B7B,uBAD2B,EAE3Be,QAF2B,CAA7B;;AAkBO,IAAMe,YAAY,GAAG,SAAfA,YAAe,CAS1B7B,KAT0B,EAUvB;AACH,2BAA6B,wCAA7B;AAAA,iDAAQC,QAAR;AAAA,MAAQA,QAAR,sCAAmB,KAAnB;;AACA,8BAA2B,0DAA3B;AAAA,MAAQE,cAAR,yBAAQA,cAAR;;AAEA,SAAO,gCAAC,oBAAD;AAA4BF,IAAAA,QAAQ,EAARA,QAA5B;AAAsCE,IAAAA,cAAc,EAAdA;AAAtC,KAA4DH,KAA5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAP;AACD,CAfM;;;AAiBP6B,YAAY,CAACC,WAAb,GAA2B,4BAA3B","sourcesContent":["import React from 'react';\nimport { TouchableOpacity } from 'react-native-gesture-handler';\n\nimport { useAttachmentPickerContext } from '../../contexts/attachmentPickerContext/AttachmentPickerContext';\nimport {\n  ChannelContextValue,\n  useChannelContext,\n} from '../../contexts/channelContext/ChannelContext';\nimport { useTheme } from '../../contexts/themeContext/ThemeContext';\nimport { Attach } from '../../icons/Attach';\n\nimport type { GestureResponderEvent } from 'react-native';\n\nimport type {\n  DefaultAttachmentType,\n  DefaultChannelType,\n  DefaultCommandType,\n  DefaultEventType,\n  DefaultMessageType,\n  DefaultReactionType,\n  DefaultUserType,\n  UnknownType,\n} from '../../types/types';\n\ntype AttachButtonPropsWithContext<\n  At extends UnknownType = DefaultAttachmentType,\n  Ch extends UnknownType = DefaultChannelType,\n  Co extends string = DefaultCommandType,\n  Ev extends UnknownType = DefaultEventType,\n  Me extends UnknownType = DefaultMessageType,\n  Re extends UnknownType = DefaultReactionType,\n  Us extends UnknownType = DefaultUserType,\n> = Pick<ChannelContextValue<At, Ch, Co, Ev, Me, Re, Us>, 'disabled'> & {\n  /** Function that opens attachment options bottom sheet */\n  handleOnPress?: ((event: GestureResponderEvent) => void) & (() => void);\n  selectedPicker?: 'images';\n};\n\nconst AttachButtonWithContext = <\n  At extends UnknownType = DefaultAttachmentType,\n  Ch extends UnknownType = DefaultChannelType,\n  Co extends string = DefaultCommandType,\n  Ev extends UnknownType = DefaultEventType,\n  Me extends UnknownType = DefaultMessageType,\n  Re extends UnknownType = DefaultReactionType,\n  Us extends UnknownType = DefaultUserType,\n>(\n  props: AttachButtonPropsWithContext<At, Ch, Co, Ev, Me, Re, Us>,\n) => {\n  const { disabled, handleOnPress, selectedPicker } = props;\n  const {\n    theme: {\n      colors: { accent_blue, grey },\n      messageInput: { attachButton },\n    },\n  } = useTheme();\n\n  return (\n    <TouchableOpacity\n      disabled={disabled}\n      hitSlop={{ bottom: 15, left: 15, right: 5, top: 15 }}\n      onPress={disabled ? () => null : handleOnPress}\n      style={[attachButton]}\n      testID='attach-button'\n    >\n      <Attach pathFill={selectedPicker === 'images' ? accent_blue : grey} />\n    </TouchableOpacity>\n  );\n};\n\nconst areEqual = <\n  At extends UnknownType = DefaultAttachmentType,\n  Ch extends UnknownType = DefaultChannelType,\n  Co extends string = DefaultCommandType,\n  Ev extends UnknownType = DefaultEventType,\n  Me extends UnknownType = DefaultMessageType,\n  Re extends UnknownType = DefaultReactionType,\n  Us extends UnknownType = DefaultUserType,\n>(\n  prevProps: AttachButtonPropsWithContext<At, Ch, Co, Ev, Me, Re, Us>,\n  nextProps: AttachButtonPropsWithContext<At, Ch, Co, Ev, Me, Re, Us>,\n) => {\n  const {\n    disabled: prevDisabled,\n    handleOnPress: prevHandleOnPress,\n    selectedPicker: prevSelectedPicker,\n  } = prevProps;\n  const {\n    disabled: nextDisabled,\n    handleOnPress: nextHandleOnPress,\n    selectedPicker: nextSelectedPicker,\n  } = nextProps;\n\n  const disabledEqual = prevDisabled === nextDisabled;\n  if (!disabledEqual) return false;\n\n  const handleOnPressEqual = prevHandleOnPress === nextHandleOnPress;\n  if (!handleOnPressEqual) return false;\n\n  const selectedPickerEqual = prevSelectedPicker === nextSelectedPicker;\n  if (!selectedPickerEqual) return false;\n\n  return true;\n};\n\nconst MemoizedAttachButton = React.memo(\n  AttachButtonWithContext,\n  areEqual,\n) as typeof AttachButtonWithContext;\n\nexport type AttachButtonProps<\n  At extends UnknownType = DefaultAttachmentType,\n  Ch extends UnknownType = DefaultChannelType,\n  Co extends string = DefaultCommandType,\n  Ev extends UnknownType = DefaultEventType,\n  Me extends UnknownType = DefaultMessageType,\n  Re extends UnknownType = DefaultReactionType,\n  Us extends UnknownType = DefaultUserType,\n> = Partial<AttachButtonPropsWithContext<At, Ch, Co, Ev, Me, Re, Us>>;\n\n/**\n * UI Component for attach button in MessageInput component.\n */\nexport const AttachButton = <\n  At extends UnknownType = DefaultAttachmentType,\n  Ch extends UnknownType = DefaultChannelType,\n  Co extends string = DefaultCommandType,\n  Ev extends UnknownType = DefaultEventType,\n  Me extends UnknownType = DefaultMessageType,\n  Re extends UnknownType = DefaultReactionType,\n  Us extends UnknownType = DefaultUserType,\n>(\n  props: AttachButtonProps<At, Ch, Co, Ev, Me, Re, Us>,\n) => {\n  const { disabled = false } = useChannelContext<At, Ch, Co, Ev, Me, Re, Us>();\n  const { selectedPicker } = useAttachmentPickerContext();\n\n  return <MemoizedAttachButton {...{ disabled, selectedPicker }} {...props} />;\n};\n\nAttachButton.displayName = 'AttachButton{messageInput}';\n"]}